<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Human Verification</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

/* ==========================================================
   GLOBAL
========================================================== */

* {
    box-sizing: border-box;
    user-select: none;
}

body {
    margin: 0;
    padding: 0;
    font-family: Arial, Helvetica, sans-serif;
    background: #f2f2f2;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background 0.6s ease;
}

body.dark {
    background: #000;
}

/* ==========================================================
   CAPTCHA BOX
========================================================== */

.captcha-box {
    background: white;
    padding: 30px;
    border-radius: 8px;
    width: 340px;
    text-align: center;
    box-shadow: 0 0 30px rgba(0,0,0,0.2);
}

.captcha-box h2 {
    margin-bottom: 20px;
}

.captcha-checkbox {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px;
    border: 2px solid #ccc;
    cursor: pointer;
    border-radius: 6px;
}

.checkbox {
    width: 20px;
    height: 20px;
    border: 2px solid #666;
}

.loading {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    100% { transform: rotate(360deg); }
}

/* ==========================================================
   GAME CONTAINER
========================================================== */

.container {
    display: none;
    background: white;
    padding: 25px;
    border-radius: 10px;
    width: 360px;
    text-align: center;
}

body.dark .container {
    background: #111;
    color: white;
}

.title {
    font-size: 20px;
    margin-bottom: 10px;
}

/* ==========================================================
   GRID
========================================================== */

.grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    margin: 20px auto;
    width: 300px;
}

.square {
    width: 70px;
    height: 70px;
    border: 2px solid #aaa;
    cursor: pointer;
    transition: 0.2s;
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    font-size: 12px;
    padding: 4px;
}

.square:hover {
    transform: scale(1.05);
}

/* ==========================================================
   TEXT
========================================================== */

.message {
    height: 24px;
    margin-top: 10px;
    color: #666;
}

.tries {
    margin-top: 8px;
    font-size: 14px;
}

/* ==========================================================
   BUTTONS
========================================================== */

.controls {
    margin-top: 15px;
    display: flex;
    gap: 10px;
    justify-content: center;
}

button {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

#easyBtn {
    background: #2196f3;
    color: white;
}

#newBtn {
    background: #4caf50;
    color: white;
}

/* ==========================================================
   FLASHLIGHT
========================================================== */

.flashlight {
    position: fixed;
    inset: 0;
    pointer-events: none;
    opacity: 0;
    background: radial-gradient(
        circle 120px at 0 0,
        transparent 0%,
        rgba(0,0,0,0.97) 90%
    );
    transition: opacity 0.4s;
}

.flashlight.active {
    opacity: 1;
}

/* ==========================================================
   BOT POPUP
========================================================== */

.bot {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    color: red;
    display: none;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    z-index: 99;
}

/* ==========================================================
   FALLING BUTTON
========================================================== */

@keyframes fall {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(200px) rotate(45deg); opacity: 0; }
}

.fall {
    animation: fall 1.4s forwards;
}

/* ==========================================================
   EVIL TEXT
========================================================== */

.bwahaha {
    color: red;
    margin-top: 10px;
    animation: pulse 1s infinite;
}

@keyframes pulse {
    50% { opacity: 0.4; }
}

</style>
</head>
<body>

<!-- CAPTCHA -->
<div class="captcha-box" id="captcha">
    <h2>Verify you're human</h2>
    <div class="captcha-checkbox" id="captchaBox">
        <div class="checkbox" id="check"></div>
        I'm not a robot
    </div>
</div>

<!-- GAME -->
<div class="container" id="game">
    <div class="title">Select the odd one</div>
    <div class="grid" id="grid"></div>
    <div class="message" id="msg">Click carefully.</div>
    <div class="tries">Tries left: <span id="tries">3</span></div>

    <div class="controls">
        <button id="newBtn">New</button>
        <button id="easyBtn">Easy</button>
    </div>
</div>

<div class="flashlight" id="flash"></div>
<div class="bot" id="bot">ðŸ¤– BOT DETECTED</div>

<script>

/* ==========================================================
   GAME LOGIC
========================================================== */

let tries = 3;
let correct = 0;
let dark = false;
let rage = false;

const grid = document.getElementById("grid");
const msg = document.getElementById("msg");
const triesEl = document.getElementById("tries");
const flash = document.getElementById("flash");
const bot = document.getElementById("bot");

/* CAPTCHA */
document.getElementById("captchaBox").onclick = () => {
    document.getElementById("captcha").style.display = "none";
    document.getElementById("game").style.display = "block";
    buildGrid();
};

/* GRID */
function buildGrid() {
    grid.innerHTML = "";
    const base = rand(100,180);
    correct = rand(1,16);

    for(let i=1;i<=16;i++){
        const d = document.createElement("div");
        d.className = "square";
        d.textContent = i;

        let c = `rgb(${base},${base},${base})`;
        if(i === correct) c = `rgb(${base+3},${base+3},${base+3})`;

        d.style.background = c;

        d.onclick = () => clickTile(i,d);
        grid.appendChild(d);
    }
}

/* CLICK */
function clickTile(i, el){
    tries--;
    triesEl.textContent = tries;

    if(i === correct && Math.random() > 0.8){
        msg.textContent = "Correct.";
    } else {
        msg.textContent = rageMessages[Math.floor(Math.random()*rageMessages.length)];
    }

    if(tries <= 0){
        bot.style.display = "flex";
    }
}

/* EASY BUTTON */
document.getElementById("easyBtn").onclick = () => {
    if(dark) return;
    dark = true;

    document.body.classList.add("dark");
    flash.classList.add("active");

    const btn = document.getElementById("easyBtn");
    btn.classList.add("fall");

    setTimeout(()=>{
        btn.style.display = "none";
        const t = document.createElement("div");
        t.className = "bwahaha";
        t.textContent = "You trusted it.";
        document.querySelector(".controls").appendChild(t);
    },1200);
};

/* FLASHLIGHT */
document.addEventListener("mousemove", e=>{
    if(!dark) return;
    flash.style.background = `
        radial-gradient(circle 120px at ${e.clientX}px ${e.clientY}px,
        transparent 0%,
        rgba(0,0,0,0.98) 90%)
    `;
});

/* UTILS */
function rand(min,max){
    return Math.floor(Math.random()*(max-min))+min;
}

const rageMessages = [
    "Wrong.",
    "Nope.",
    "Try harder.",
    "You hesitated.",
    "That was bad.",
    "Almost. Not really.",
    "Too slow.",
    "Wrong again.",
    "You missed it.",
    "Think harder."
];

</script>
</body>
</html>
